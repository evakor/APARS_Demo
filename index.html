<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>APARS</title>

    <!-- Leaflet Map Styles -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />

    <!-- Custom Styles -->
    <link rel="stylesheet" href="./css/style.css">

    <!-- Google Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Poppins' rel='stylesheet'>

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- PWA Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
                .then(reg => console.log('Service Worker Registered!', reg))
                .catch(err => console.error('Service Worker Registration Failed!', err));
        }
    </script>
</head>

<body>

    <!-- Navbar -->
    <div class="navbar">
        <div class="menu-logo">
            <span class="menu-icon" onclick="openMenu()">☰</span>
            <span>  </span>
            <span class="logo">  APARS</span> <!-- APARS moved next to menu -->
        </div>
    </div>

    <!-- Side Menu -->
    <div id="side-menu" class="side-menu">
        <a href="javascript:void(0)" class="close-btn" onclick="closeMenu()">×</a>
        <a href="#">Home</a>
        <a href="connectToKit.html">Connect to APARS Kit</a>
        <a href="about.html">About Us</a>
    </div>

    <!-- Map Container -->
    <div id="map"></div>

    <!-- Theme Toggle Bar -->
    <div class="theme-toggle-bar">
        <label class="switch">
            <input type="checkbox" id="theme-toggle">
            <span class="slider round"></span>
        </label>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="js/app.js"></script>

    <script>
        // Function to open the side menu
function openMenu() {
    document.getElementById("side-menu").style.width = "250px";
}

/* Closes the menu when clicking the close button or anywhere outside the menu */
function closeMenu() {
    document.getElementById("side-menu").style.width = "0";
}

// Automatically close menu when a link is clicked
document.querySelectorAll(".side-menu a").forEach(link => {
    link.addEventListener("click", () => {
        closeMenu();
    });
});

// Close menu if the user clicks outside of it
document.addEventListener("click", function(event) {
    let menu = document.getElementById("side-menu");
    let menuIcon = document.querySelector(".menu-icon");

    // Check if menu is open and user clicks outside
    if (menu.style.width === "250px" && !menu.contains(event.target) && !menuIcon.contains(event.target)) {
        closeMenu();
    }
});
    </script>

    <div class="theme-toggle-bar">
        <label class="switch">
            <input type="checkbox" id="theme-toggle">
            <span class="slider round"></span>
        </label>
    </div>

</body>

</html>
